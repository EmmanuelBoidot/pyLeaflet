{
  "name": "Pyleaflet",
  "tagline": "mpld3 extension for plotting data on a Leaflet map",
  "body": "# pyLeaflet\r\nmpld3 extension for plotting data on a Leaflet map\r\n\r\nAbout\r\n-----\r\npyLeaflet it an extension of mpld3 that provides geolocalized data visualization on a Leaflet layer as an overlay pane.\r\n\r\n\r\nInstallation\r\n------------\r\npyLeaflet is compatible with python 2.6-2.7 (python 3 not tested). It requires\r\n[mpld3](http://mpld3.github.io),\r\n[matplotlib](http://matplotlib.org) version 1.3 and\r\n[jinja2](http://jinja.pocoo.org/) version 2.7+.\r\n\r\nTo install:\r\n- clone project\r\n- within the git source directory, run\r\n\r\n     [~]$ python setup.py install\r\n\r\nDescription\r\n----------\r\nThe idea behind this module is to allow you to plot the same figures you would plot using mpld3. The first subplot of the figure should only contain (lon,lat) coordinates. It will be displayed on a Leaflet map. The other axes will be rendered by mpld3 as they would have been if you were using mpld3 alone.\r\n\r\nExample Plot\r\n----------\r\nAn example script is provided in this project: see ``example.py''. In order to plot geodata using pyLeaflet, proceed as for MatPlotLib, using the longitude as the first coordinate and the latitude as the second coordinate. The code is displayed below.\r\n\r\n```python\r\n#!/usr/bin/python\r\nimport matplotlib.pyplot as plt\r\nimport matplotlib.path as mpath\r\nimport matplotlib.patches as mpatches\r\nimport numpy as np\r\n\r\nimport pyLeaflet\r\n\r\n\r\ndef example1(saveAs=None):\r\n    N=1000\r\n\r\n    Path = mpath.Path\r\n    path_data = [\r\n        (Path.MOVETO, (1.58-85, 35-2.57)),\r\n        (Path.CURVE4, (0.35-85, 35-1.1)),\r\n        (Path.CURVE4, (-1.85-85, 35+2.0)),\r\n        (Path.CURVE4, (0.385-85, 35+2.0)),\r\n        (Path.LINETO, (0.85-85, 35+1.15)),\r\n        (Path.CURVE4, (2.2-85, 35+3.2)),\r\n        (Path.CURVE4, (3-85, 35+0.05)),\r\n        (Path.CURVE4, (2.0-85, 35-0.5)),\r\n        (Path.CLOSEPOLY, (1.58-85, 35-2.57)),\r\n        ]\r\n    codes, verts = zip(*path_data)\r\n    path = mpath.Path(verts, codes)\r\n    patch = mpatches.PathPatch(path, facecolor='r', alpha=0.5)\r\n\r\n    # plot control points and connecting lines\r\n    x, y = zip(*path.vertices[:-1])\r\n    x2 = 5.0 * np.random.randn(N) -84\r\n    y2 = 2.0 * np.random.randn(N) +32\r\n    colors = np.random.rand(N)\r\n    size = np.pi * (15 * np.random.rand(N))**2\r\n\r\n    t = np.linspace(1,100,len(x))\r\n    t2 = np.linspace(1,100,len(x2))\r\n\r\n    fig, (ax1,ax2,ax3) = plt.subplots(figsize=(18, 18),nrows=3,ncols=1)\r\n\r\n    ax1.add_patch(patch)\r\n    points = ax1.plot(x, y, 'b^', ms=10)\r\n    line = ax1.plot(x, y, '-k')\r\n    scatter = ax1.scatter(x2, y2, s=size, c=colors, alpha=0.5)\r\n    # this should draw a black dot on top of the empire state building\r\n    ax1.plot([-73.9857],[40.7484],'ro',ms=10)\r\n    ax1.axis('equal')\r\n    ax1.set_xlabel('longitude')\r\n    ax1.set_ylabel('latitude')\r\n\r\n    ax2.plot(t,x,'-k')\r\n    ax2.plot(t2,x2,'--g')\r\n    ax2.set_xlabel('t')\r\n    ax2.set_ylabel('x')\r\n    ax2.legend(['x','x2'])\r\n\r\n    ax3.plot(t,y,'-k')\r\n    ax3.plot(t2,y2,'--g')\r\n    ax3.set_xlabel('t')\r\n    ax3.set_ylabel('y')\r\n    ax3.legend(['y','y2'])\r\n\r\n\r\n    ###############\r\n    ###############\r\n    # tile_layer = \"http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.jpg\"\r\n    tile_layer = \"http://{s}.tile.stamen.com/terrain/{z}/{x}/{y}.jpg\"\r\n    html = pyLeaflet.plotWithMap(fig,tile_layer = tile_layer,saveAs=saveAs)\r\n\r\n    return html\r\n\r\ndef render_csv_file(fname,delimiter=',',saveAs=None, **kwargs):\r\n    data = np.genfromtxt(fname,names=True,skip_header=0,delimiter=',')\r\n    x, y =  data['lon'],data['lat']\r\n\r\n    fig, ax1 = plt.subplots(figsize=(15, 18),nrows=1,ncols=1)\r\n\r\n    # this plots the lines of the csv as markers, colored as a function\r\n    # of the column `info1`, with a linear colormap blue->green\r\n\r\n    kwargs['marker'] = 'o' if not kwargs.has_key('marker') else kwargs['marker']\r\n    kwargs['s'] = [50]*len(x) if not kwargs.has_key('s') else kwargs['s']\r\n    kwargs['cmap'] = \\\r\n        plt.get_cmap('winter') if not kwargs.has_key('cmap') else kwargs['cmap']\r\n    kwargs['c'] = data['info1'] if not kwargs.has_key('c') else kwargs['c']\r\n    kwargs['linewidths'] = \\\r\n        0 if not kwargs.has_key('linewidths') else kwargs['linewidths']\r\n\r\n    print kwargs\r\n\r\n    ax1.scatter(x, y, **kwargs)\r\n\r\n    ax1.axis('equal')\r\n    ax1.set_xlabel('longitude')\r\n    ax1.set_ylabel('latitude')\r\n\r\n    ###############\r\n    ###############\r\n    # tile_layer = \"http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.jpg\"\r\n    tile_layer = \"http://{s}.tile.stamen.com/terrain/{z}/{x}/{y}.jpg\"\r\n    html = pyLeaflet.plotWithMap(fig,tile_layer = tile_layer,saveAs=saveAs)\r\n\r\n    return html\r\n\r\n\r\nexample1(saveAs=\"pyLeaflet_example.html\")\r\n# render_csv_file('example.csv',linewidths=0,marker='v')\r\n```\r\n\r\nThe output of the script above can be found [here](http://emmanuelboidot.github.io/pyLeaflet/example.html)\r\n\r\n{% include example.html %}",
  "google": "UA-53841221-4",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}